# Настройка админ-аутентификации

## Шаги для настройки:

### 1. Настройка Supabase

1. Перейдите в Supabase Dashboard > Authentication > Settings
2. Включите "Enable email confirmations" (если нужно)
3. Убедитесь, что "Enable email signup" включено

### 2. Создание админ-пользователя

Настройте политики в Supabase Dashboard или используйте SQL Editor для создания необходимых политик.

### 3. Создание админ-пользователя

Админ-пользователь создается автоматически при первом входе через попап. Просто:
1. Перейдите на любую страницу с `?admin`
2. Введите желаемый пароль
3. Система автоматически создаст пользователя `zolotojznak@gmail.com`

### 4. Использование

После настройки:

1. Перейдите на любую страницу сайта
2. Добавьте `?admin` к URL (например: `http://yoursite.com/yagya?admin`)
3. Откроется попап для админ-аутентификации
4. Введите пароль:
   - Если пользователь `admin@admin.com` уже существует, произойдет вход
   - Если пользователь не существует, он будет автоматически создан с введенным паролем

### 5. Автоматическая регистрация

Система поддерживает автоматическую регистрацию админ-пользователя:
- При первом использовании, если пользователь `admin@admin.com` не существует, он будет создан автоматически
- Пароль, введенный в попапе, станет паролем для нового админ-пользователя
- После создания пользователя, система автоматически войдет в систему

### 6. Управление турами

После входа в админ-панель доступны следующие функции:

#### Добавление туров
1. Перейдите на страницу `/tours`
2. Нажмите на карточку с плюсом (появляется только для админов)
3. Заполните форму:
   - **Название тура**: Введите название на русском языке
   - **Описание**: Добавьте описание тура
   - **Даты**: Укажите даты начала и окончания
   - **URL изображения**: Добавьте ссылку на изображение
   - **Slug**: Генерируется автоматически из названия

#### Автоматическая генерация slug
- Система автоматически транслитерирует русский текст в латиницу
- Удаляет специальные символы и заменяет пробелы на дефисы
- Приводит к нижнему регистру
- Пример: "Паломничество по Храмам" → "palomnichestvo-po-hramam"

### 5. Безопасность

- Пароль должен быть достаточно сложным
- Не используйте этот пароль для других сервисов
- Регулярно меняйте пароль
- Используйте HTTPS в продакшене

### 6. Дополнительные возможности

После входа админа вы можете:
- Добавить админ-панель для управления контентом
- Создать защищенные маршруты только для админа
- Добавить логирование действий админа 